
<!---------------------------------------------------------------------- 

Segnalazione:
Un utente puo' segnalare una dispensa o un commento.
In entrambi i casi, il flag "Eliminabile" della dispensa viene settato a false.
Se il flag della dispensa e' settato a false, la dispensa e i commenti presenti, non possono essere eliminati, fino
a quando non viene ripristinato.

Quando viene segnalata una dispensa o un commento e' richiesto l'inserimento di una descrizione causale.
A livello di db il sistema registra:
- la descrizione
- foreignkey con dispensa ()
- foreignkey con commento (campo opzionale -> onetoone)

Al superuser viene mostrata una tabella con le segnalazioni:
- descrizione -link alla pagina della dispensa(nomefile)   banna utente  cancella

Con banna utente si accede all'id dell'utente e si setta a false il flag_is_active.
Inoltre si aggiorna il campo ban dell'user_profile a True.

-> Nel database e' presente una tabella con i bannati.
   - userprofile(one to one)	-sbanna

   Modificare la richiesta del link di attivazione:
   Si controlla se l'email del richiedente e' presente nei bannati, se non lo e' invia nuovo codice di attivazione,
   altrimenti redirezione su pagina: contattare i rappresentati ecc.

Con cancella, viene cancellata la segnalazione, con l'utente che rimane bannato o sbannato a seconda della scelta dell'amministratore del sistema.


-->

BUG DA RISOLVERE:
-> sistemata la view 1
-> sistemata la view 2

Rimane la vie3:
attiva funziona correttamente appendendo l'user e settando a false il controllo del caricante,
funziona anche con un utente diverso.
Nessun problema nella gestione della visualizzazione delle dispense.

Problema nella gestione delle notifiche:

{% if user_profile.not_globali == True %}
	<br><b>Notizie da leggere in:</b><br>
	<table cellpadding = "10" frame = "none" >
	{% for disp in notifiche %}
		<tr>
			<td><a href="/cdl/{{disp.insegnamento.corso}}/{{disp.insegnamento}}/">{{n.titolo}}</a></td>
			<td>Ultimo commento di:</td>
			<td>
				{% for ultimo in ultimo_comm %}
					{% if ultimo.dispensa.id == disp.id %}
						{{ultimo.utente.username}}
					{% endif %}
				{% endfor %}
			</td>
		</tr>
		<tr>
			<td><form action="/accounts/profilo_utente/notifiche_locali/{{n.id}}/dis"><button type="submit">Disiscrivimi</button></form></td>
		</tr>
	{% endfor%}
	</table>
{% endif %}











